<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Arcane Codex</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@600&family=MedievalSharp&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32"><text y="20" style="font-size:30px">⚔️</text></svg>'), auto;
        }

        html {
            overflow: hidden;
            width: 100%;
            height: 100%;
        }

        body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: linear-gradient(135deg, #000000 0%, #001a00 25%, #002200 50%, #001100 75%, #000000 100%);
            font-family: 'MedievalSharp', cursive;
            position: fixed;
            top: 0;
            left: 0;
            /* Reduced flicker for button stability */
            animation: screenFlicker 2s ease-in-out infinite;
        }

        /* CRT Screen flicker - Slower for Playwright stability */
        @keyframes screenFlicker {
            0% { opacity: 1; }
            50% { opacity: 0.98; }
            100% { opacity: 1; }
        }


        /* ENHANCED CRT Scanlines - More visible and animated */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                0deg,
                rgba(0, 0, 0, 0.4) 0px,
                rgba(0, 0, 0, 0.4) 1px,
                transparent 1px,
                transparent 3px
            );
            pointer-events: none;
            z-index: 9999;
            animation: scanlineMove 12s linear infinite, scanlineFade 0.1s infinite;
        }

        @keyframes scanlineMove {
            0% { transform: translateY(0); }
            100% { transform: translateY(12px); }
        }

        @keyframes scanlineFade {
            0%, 100% { opacity: 0.9; }
            50% { opacity: 1; }
        }

        /* ENHANCED CRT Screen curvature and vignette - MUCH darker edges */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(
                ellipse at center,
                transparent 0%,
                rgba(0, 0, 0, 0.2) 40%,
                rgba(0, 0, 0, 0.6) 70%,
                rgba(0, 0, 0, 0.95) 100%
            );
            pointer-events: none;
            z-index: 9998;
            border-radius: 10px;
            animation: screenFlicker 0.15s infinite;
        }

        /* Screen refresh flicker (like old CRT monitors) */
        @keyframes screenFlicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.98; }
        }

        /* Animated starfield background */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #66ff66;
            box-shadow: 0 0 2px #00ff00;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }

        /* Floating energy particles - green theme */
        .ember {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #00ff00;
            border-radius: 50%;
            animation: float 10s infinite linear;
            box-shadow: 0 0 10px #00ff66;
        }

        @keyframes float {
            from {
                transform: translateY(100vh) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            to {
                transform: translateY(-100vh) translateX(100px);
                opacity: 0;
            }
        }

        /* Main game container */
        .game-screen {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 10;
            padding: 20px;
        }

        /* ENHANCED RPG Title - EXTREME chromatic aberration and phosphor glow */
        .game-title {
            font-family: 'Cinzel', serif;
            font-size: min(10vw, 80px);
            color: #00ff00;
            text-shadow:
                -3px 0 0 #ff00ff,
                3px 0 0 #00ffff,
                -6px 0 0 rgba(255, 0, 255, 0.5),
                6px 0 0 rgba(0, 255, 255, 0.5),
                0 0 20px rgba(0, 255, 0, 1),
                0 0 40px rgba(0, 255, 0, 0.9),
                0 0 60px rgba(0, 255, 0, 0.7),
                0 0 80px rgba(0, 255, 0, 0.5),
                0 0 100px rgba(0, 255, 0, 0.3),
                0 5px 15px rgba(0, 0, 0, 0.9);
            margin-bottom: 10px;
            animation: titleGlitch 3s ease-in-out infinite, glow 2s ease-in-out infinite alternate, phosphorTrail 0.08s infinite;
            text-align: center;
            letter-spacing: 3px;
            line-height: 0.9;
            position: relative;
        }

        @keyframes titleGlitch {
            0%, 90%, 100% {
                text-shadow:
                    -2px 0 0 #ff00ff,
                    2px 0 0 #00ffff,
                    0 0 30px rgba(0, 255, 0, 0.8),
                    0 0 60px rgba(0, 255, 0, 0.6);
            }
            92%, 94%, 96% {
                text-shadow:
                    -4px 0 0 #ff00ff,
                    4px 2px 0 #00ffff,
                    0 0 50px rgba(0, 255, 0, 1),
                    0 0 100px rgba(0, 255, 0, 0.8);
                transform: skew(-2deg);
            }
            93%, 95% {
                text-shadow:
                    2px 0 0 #ff00ff,
                    -2px 0 0 #00ffff,
                    0 0 40px rgba(0, 255, 0, 0.9);
                transform: skew(2deg);
            }
        }

        @keyframes glow {
            from { filter: brightness(1) drop-shadow(0 0 20px rgba(0, 255, 0, 0.5)); }
            to { filter: brightness(1.3) drop-shadow(0 0 40px rgba(0, 255, 102, 0.8)); }
        }

        /* Phosphor persistence - simulates CRT ghosting */
        @keyframes phosphorTrail {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.95; }
        }

        /* Subtitle - Cyan phosphor with typing effect */
        .game-subtitle {
            color: #00ffff;
            font-size: min(3vw, 20px);
            margin-bottom: 30px;
            text-shadow:
                0 0 10px rgba(0, 255, 255, 0.8),
                0 0 20px rgba(0, 255, 255, 0.4),
                0 2px 4px rgba(0, 0, 0, 0.8);
            font-style: italic;
            animation: textFlicker 0.5s infinite;
        }

        @keyframes textFlicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.95; }
        }

        /* Main Menu */
        .main-menu {
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: center;
        }

        /* Hide scrollbars but keep functionality */
        .main-menu::-webkit-scrollbar {
            display: none;
        }

        .main-menu {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* RPG Menu Button - Amber/Yellow phosphor for regular buttons */
        .menu-button {
            position: relative;
            padding: 12px 40px;
            font-size: min(3vw, 24px);
            font-family: 'Cinzel', serif;
            background: linear-gradient(180deg, #332200 0%, #221100 100%);
            border: 3px solid #ffb000;
            color: #ffb000;
            text-transform: uppercase;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow:
                inset 0 0 30px rgba(255, 176, 0, 0.1),
                0 5px 15px rgba(0, 0, 0, 0.8),
                0 0 10px rgba(255, 176, 0, 0.3);
            overflow: hidden;
            white-space: nowrap;
        }

        .menu-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 176, 0, 0.4), transparent);
            transition: left 0.5s;
        }

        .menu-button:hover::before {
            left: 100%;
        }

        .menu-button:hover {
            transform: scale(1.05);
            background: linear-gradient(180deg, #443300 0%, #332200 100%);
            box-shadow:
                inset 0 0 50px rgba(255, 176, 0, 0.3),
                0 0 30px rgba(255, 176, 0, 0.5),
                0 5px 15px rgba(0, 0, 0, 0.8);
            color: #ffd966;
        }

        /* PLAY button special - Green phosphor (overrides amber) */
        .menu-button.primary {
            font-size: min(4vw, 32px);
            padding: 15px 50px;
            animation: pulse 2s infinite;
            background: linear-gradient(180deg, #003300 0%, #001100 100%);
            border: 3px solid #00ff66;
            color: #00ff00;
            box-shadow:
                inset 0 0 30px rgba(0, 255, 102, 0.2),
                0 5px 15px rgba(0, 0, 0, 0.8),
                0 0 20px rgba(0, 255, 0, 0.5);
        }

        .menu-button.primary::before {
            background: linear-gradient(90deg, transparent, rgba(0, 255, 0, 0.4), transparent);
        }

        .menu-button.primary:hover {
            background: linear-gradient(180deg, #004400 0%, #002200 100%);
            box-shadow:
                inset 0 0 50px rgba(0, 255, 0, 0.3),
                0 0 30px rgba(0, 255, 0, 0.5),
                0 5px 15px rgba(0, 0, 0, 0.8);
            color: #66ff66;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow:
                    inset 0 0 30px rgba(0, 255, 102, 0.2),
                    0 5px 15px rgba(0, 0, 0, 0.8),
                    0 0 20px rgba(0, 255, 0, 0.5);
            }
            50% {
                transform: scale(1.05);
                box-shadow:
                    inset 0 0 50px rgba(0, 255, 102, 0.4),
                    0 5px 25px rgba(0, 0, 0, 0.9),
                    0 0 40px rgba(0, 255, 0, 0.8),
                    0 0 60px rgba(0, 255, 0, 0.6);
            }
        }

        /* Dragon silhouette */
        .dragon-bg {
            position: fixed;
            bottom: 0;
            right: 0;
            width: 50%;
            height: 50%;
            opacity: 0.1;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><path d="M500 200 Q400 300 350 400 Q300 500 400 600 L500 650 L600 600 Q700 500 650 400 Q600 300 500 200 M350 400 L250 350 M650 400 L750 350 M400 600 L350 700 M600 600 L650 700" stroke="white" fill="none" stroke-width="3"/></svg>') no-repeat center;
            pointer-events: none;
            overflow: hidden;
        }

        /* Torch flames on sides */
        .torch {
            position: fixed;
            width: 60px;
            height: 200px;
        }

        .torch.left {
            left: 5%;
            top: 20%;
        }

        .torch.right {
            right: 5%;
            top: 20%;
        }

        .flame {
            width: 40px;
            height: 60px;
            background: radial-gradient(ellipse at bottom, #ff6b35 0%, #ff9558 40%, transparent 70%);
            animation: flicker 0.5s infinite alternate;
            margin: 0 auto;
        }

        @keyframes flicker {
            0% { transform: scale(1) translateY(0); }
            100% { transform: scale(1.1) translateY(-5px); filter: brightness(1.2); }
        }

        /* Version info with glowing effect */
        .version {
            position: fixed;
            bottom: 20px;
            right: 20px;
            color: #00ff00;
            font-size: 14px;
            font-family: 'Courier New', monospace;
            text-shadow:
                0 0 5px rgba(0, 255, 0, 0.8),
                0 0 10px rgba(0, 255, 0, 0.4);
            animation: versionPulse 3s ease-in-out infinite;
        }

        @keyframes versionPulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        /* Settings gear */
        .settings {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            color: #a78bfa;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .settings:hover {
            transform: rotate(90deg);
        }

        /* Loading screen overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: none;
            z-index: 1000;
        }

        /* Responsive adjustments for smaller screens */
        @media (max-height: 700px) {
            .game-title {
                font-size: min(8vw, 60px);
                margin-bottom: 5px;
            }
            .game-subtitle {
                font-size: min(2.5vw, 16px);
                margin-bottom: 20px;
            }
            .menu-button {
                padding: 8px 30px;
                font-size: min(2.5vw, 18px);
            }
            .menu-button.primary {
                font-size: min(3vw, 24px);
                padding: 10px 40px;
            }
            .main-menu {
                gap: 5px;
            }
        }
    </style>
</head>
<body>
    <!-- Removed fullscreen overlay - game starts directly -->

    <!-- Starfield DISABLED - user doesn't like stars -->
    <!-- <div class="stars" id="stars"></div> -->

    <!-- Floating embers (DISABLED) -->
    <!-- <div id="embers"></div> -->

    <!-- Dragon silhouette -->
    <div class="dragon-bg"></div>

    <!-- Torch flames (DISABLED) -->
    <!-- <div class="torch left">
        <div class="flame"></div>
    </div>
    <div class="torch right">
        <div class="flame"></div>
    </div> -->

    <!-- Main game screen -->
    <div class="game-screen">
        <h1 class="game-title">THE ARCANE<br>CODEX</h1>
        <p class="game-subtitle">Where Secrets Shatter Bonds</p>

        <div class="main-menu">
            <button class="menu-button primary" onclick="playGame()">
                PLAY
            </button>
            <button class="menu-button" onclick="joinGame()">
                JOIN GAME
            </button>
        </div>
    </div>

    <!-- Settings icon removed - use SETTINGS button in menu instead -->

    <!-- Version -->
    <div class="version">v1.0.0</div>

    <!-- Loading overlay -->
    <div class="loading-overlay" id="loading"></div>

    <script>
        // Enter fullscreen
        function enterFullscreen() {
            const elem = document.documentElement;
            if (elem.requestFullscreen) {
                elem.requestFullscreen();
            } else if (elem.webkitRequestFullscreen) {
                elem.webkitRequestFullscreen();
            } else if (elem.msRequestFullscreen) {
                elem.msRequestFullscreen();
            } else if (elem.mozRequestFullScreen) {
                elem.mozRequestFullScreen();
            }
        }

        // Create starfield with multiple phosphor colors
        function createStars() {
            const stars = document.getElementById('stars');
            const colors = [
                {bg: '#66ff66', shadow: '#00ff00'},  // Green phosphor
                {bg: '#00ffff', shadow: '#00ccff'},  // Cyan phosphor
                {bg: '#ffb000', shadow: '#ff8800'},  // Amber phosphor
                {bg: '#ff00ff', shadow: '#cc00cc'}   // Magenta phosphor
            ];

            for(let i = 0; i < 300; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                const color = colors[Math.floor(Math.random() * colors.length)];
                const size = 1 + Math.random() * 3;
                star.style.width = size + 'px';
                star.style.height = size + 'px';
                star.style.background = color.bg;
                star.style.boxShadow = `0 0 ${size * 2}px ${color.shadow}`;
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                stars.appendChild(star);
            }
        }

        // Create floating particles with multiple phosphor colors
        function createEmbers() {
            const embers = document.getElementById('embers');
            const colors = [
                {bg: '#00ff00', shadow: '#00ff66'},  // Green
                {bg: '#00ffff', shadow: '#00ccff'},  // Cyan
                {bg: '#ffb000', shadow: '#ffd966'},  // Amber
                {bg: '#ff00ff', shadow: '#ff66ff'}   // Magenta
            ];

            for(let i = 0; i < 30; i++) {
                const ember = document.createElement('div');
                ember.className = 'ember';
                const color = colors[Math.floor(Math.random() * colors.length)];
                const size = 3 + Math.random() * 6;
                ember.style.width = size + 'px';
                ember.style.height = size + 'px';
                ember.style.background = color.bg;
                ember.style.boxShadow = `0 0 ${size * 3}px ${color.shadow}`;
                ember.style.left = Math.random() * 100 + '%';
                ember.style.animationDelay = Math.random() * 10 + 's';
                ember.style.animationDuration = (10 + Math.random() * 10) + 's';
                embers.appendChild(ember);
            }
        }

        function playGame() {
            const loading = document.getElementById('loading');
            loading.style.display = 'flex';
            setTimeout(() => {
                // Go to multiplayer game interface (keeps Medieval theme)
                window.location.href = '/game';
            }, 500);
        }

        function joinGame() {
            const loading = document.getElementById('loading');
            loading.style.display = 'flex';
            setTimeout(() => {
                // Go to multiplayer game interface with join mode flag
                localStorage.setItem('auto_show_join', 'true');
                window.location.href = '/game';
            }, 500);
        }

        // Track if fullscreen has been triggered
        let fullscreenAttempted = false;

        // Modified button functions to trigger fullscreen on first interaction
        function triggerFullscreenAndAction(action) {
            if (!fullscreenAttempted && !document.fullscreenElement) {
                enterFullscreen();
                fullscreenAttempted = true;
            }
            action();
        }

        // Update button functions
        // Initialize
        window.onload = () => {
            // createStars(); // DISABLED - user doesn't like stars
            // createEmbers(); // DISABLED - user doesn't like floating particles

            // Keyboard shortcut for fullscreen (F key)
            document.addEventListener('keydown', (e) => {
                if (e.key === 'f' || e.key === 'F') {
                    if (!document.fullscreenElement) {
                        enterFullscreen();
                        fullscreenAttempted = true;
                    }
                }
            });
        };

        // Keyboard shortcuts
        document.addEventListener('keypress', (e) => {
            if(e.key === 'p' || e.key === 'P') playGame();
            if(e.key === 'j' || e.key === 'J') joinGame();
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Arcane Codex - Crystal Clear Events</title>
    <link rel="stylesheet" href="css/battle_scene_animations.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700;900&family=Spectral:ital,wght@0,300;0,400;0,600;1,400;1,600&display=swap');

        :root {
            --gold: #D4AF37;
            --gold-light: #FFD700;
            --gold-dark: #8B7355;
            --bg-dark: #09090b;
            --bg-panel: rgba(42, 36, 30, 0.95);
            --text-light: #E4D4B4;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Spectral', serif;
            background: linear-gradient(180deg, #0A0812 0%, #1A1425 100%);
            color: var(--gold);
            line-height: 1.8;
        }

        .game-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 60px 40px 120px;
            min-height: 100vh;
        }

        /* === EPISODE HEADER === */
        .episode-header {
            text-align: center;
            padding: 80px 20px 60px;
            border-bottom: 3px solid var(--gold-dark);
            margin-bottom: 60px;
        }

        .episode-number {
            font-family: 'Cinzel', serif;
            font-size: 16px;
            color: var(--gold-dark);
            letter-spacing: 4px;
            margin-bottom: 15px;
        }

        .episode-title {
            font-family: 'Cinzel', serif;
            font-size: 48px;
            font-weight: 900;
            color: var(--gold-light);
            letter-spacing: 3px;
            margin-bottom: 20px;
            text-shadow: 0 0 30px var(--gold-light);
        }

        .episode-location {
            font-size: 18px;
            color: var(--gold-dark);
            font-style: italic;
        }

        /* === INDIVIDUAL EVENT CARDS === */
        .event-card {
            background: var(--bg-panel);
            border: 2px solid var(--gold-dark);
            border-radius: 12px;
            padding: 40px;
            margin: 40px 0;
            opacity: 0;
            animation: fadeIn 0.8s ease-in forwards;
        }

        .event-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--gold-dark);
        }

        .event-icon {
            font-size: 36px;
            filter: drop-shadow(0 0 10px var(--gold));
        }

        .event-label {
            font-family: 'Cinzel', serif;
            font-size: 20px;
            color: var(--gold-light);
            letter-spacing: 2px;
        }

        .event-content {
            font-size: 19px;
            color: var(--text-light);
            line-height: 1.9;
        }

        .event-content p {
            margin-bottom: 20px;
        }

        .event-content strong {
            color: var(--gold-light);
        }

        /* Event Type Variants */
        .event-card.narration {
            border-left: 5px solid #4A9EFF;
        }

        .event-card.dialogue {
            border-left: 5px solid #9B7AAB;
            background: rgba(123, 90, 139, 0.1);
        }

        .event-card.discovery {
            border-left: 5px solid #FFD700;
            background: rgba(255, 215, 0, 0.05);
        }

        .event-card.danger {
            border-left: 5px solid #FF4444;
            background: rgba(255, 68, 68, 0.05);
        }

        .event-card.choice {
            border: 3px solid var(--gold);
            background: rgba(212, 175, 55, 0.05);
        }

        /* === DIALOGUE BOX === */
        .dialogue-box {
            margin: 15px 0;
            padding: 20px 25px;
            background: rgba(0, 0, 0, 0.3);
            border-left: 4px solid var(--gold);
            border-radius: 6px;
        }

        .dialogue-speaker {
            font-family: 'Cinzel', serif;
            font-size: 16px;
            color: var(--gold-light);
            margin-bottom: 8px;
            letter-spacing: 1px;
        }

        .dialogue-text {
            font-style: italic;
            color: #C4A571;
        }

        /* === DISCOVERY BOX === */
        .discovery-box {
            margin: 20px 0;
            padding: 25px;
            background: rgba(255, 215, 0, 0.08);
            border: 2px solid var(--gold-light);
            border-radius: 8px;
        }

        .discovery-title {
            font-family: 'Cinzel', serif;
            font-size: 18px;
            color: var(--gold-light);
            margin-bottom: 12px;
            letter-spacing: 2px;
        }

        .discovery-content {
            color: var(--text-light);
        }

        /* === WARNING BOX === */
        .warning-box {
            margin: 20px 0;
            padding: 25px;
            background: rgba(255, 68, 68, 0.08);
            border: 2px solid #FF4444;
            border-radius: 8px;
        }

        .warning-title {
            font-family: 'Cinzel', serif;
            font-size: 18px;
            color: #FF6666;
            margin-bottom: 12px;
            letter-spacing: 2px;
        }

        .warning-content {
            color: var(--text-light);
        }

        /* === CHOICE PANEL === */
        .choice-panel {
            margin: 30px 0;
        }

        .choice-question {
            font-family: 'Cinzel', serif;
            font-size: 22px;
            color: var(--gold-light);
            margin-bottom: 25px;
            text-align: center;
        }

        .choice-option {
            display: flex;
            align-items: flex-start;
            gap: 20px;
            padding: 25px;
            margin: 15px 0;
            background: linear-gradient(135deg, #2A1810 0%, #4A3428 100%);
            border: 2px solid var(--gold);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .choice-option:hover {
            background: linear-gradient(135deg, #3A2820 0%, #5A4438 100%);
            border-color: var(--gold-light);
            transform: translateX(10px);
            box-shadow: 0 5px 20px rgba(212, 175, 55, 0.3);
        }

        .choice-number {
            flex-shrink: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--gold);
            color: #0A0908;
            font-family: 'Cinzel', serif;
            font-size: 20px;
            font-weight: 700;
            border-radius: 50%;
        }

        .choice-details {
            flex: 1;
        }

        .choice-action {
            font-size: 18px;
            color: var(--gold-light);
            margin-bottom: 8px;
            font-weight: 600;
        }

        .choice-consequence {
            font-size: 15px;
            color: var(--gold-dark);
            font-style: italic;
        }

        /* === OUTCOME BANNER === */
        .outcome-banner {
            margin: 40px 0;
            padding: 30px;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.2), rgba(255, 215, 0, 0.1));
            border: 3px solid var(--gold-light);
            border-radius: 10px;
            text-align: center;
        }

        .outcome-title {
            font-family: 'Cinzel', serif;
            font-size: 24px;
            color: var(--gold-light);
            margin-bottom: 15px;
            letter-spacing: 3px;
        }

        .outcome-text {
            font-size: 17px;
            color: var(--text-light);
            line-height: 1.7;
        }

        .outcome-stat {
            display: inline-block;
            margin: 10px 15px;
            padding: 8px 20px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 20px;
            font-size: 15px;
        }

        .stat-positive {
            color: #4CAF50;
        }

        .stat-negative {
            color: #FF6666;
        }

        /* === CONTINUE SECTION === */
        .continue-section {
            text-align: center;
            margin: 60px 0;
            padding: 40px;
            background: rgba(42, 36, 30, 0.5);
            border-radius: 12px;
        }

        .continue-prompt {
            font-family: 'Cinzel', serif;
            font-size: 18px;
            color: var(--gold);
            margin-bottom: 20px;
        }

        .continue-btn {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            padding: 18px 45px;
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
            color: #0A0908;
            font-family: 'Cinzel', serif;
            font-size: 18px;
            font-weight: 700;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 25px rgba(212, 175, 55, 0.4);
        }

        .continue-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 35px rgba(212, 175, 55, 0.6);
        }

        /* === EVENT PROGRESS === */
        .event-progress {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-panel);
            border: 2px solid var(--gold-dark);
            border-radius: 25px;
            padding: 12px 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.6);
            z-index: 100;
        }

        .event-progress-text {
            font-family: 'Cinzel', serif;
            font-size: 14px;
            color: var(--gold);
            letter-spacing: 2px;
        }

        /* === ANIMATIONS === */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .hidden { display: none; }

        @media (max-width: 768px) {
            .game-container { padding: 40px 20px; }
            .episode-title { font-size: 32px; }
            .event-card { padding: 25px; }
        }
    </style>
</head>
<body>
    <!-- Event Progress Indicator -->
    <div class="event-progress">
        <span class="event-progress-text" id="progress-text">EVENT 1 of 8</span>
    </div>

    <div class="game-container" id="game-content">
        <!-- Content loads here via JavaScript -->
    </div>

    <script src="js/battle_scene_animations.css"></script>
    <script>
        let currentEventIndex = 0;
        const totalEvents = 8;

        // Define all events in sequence
        const events = [
            // EVENT 1: Episode Introduction
            {
                type: 'header',
                content: {
                    number: 'EPISODE 1',
                    title: 'THE DESCENT',
                    location: 'Temple Entrance ‚Üí Ancient Crypt'
                }
            },

            // EVENT 2: Initial Narration
            {
                type: 'narration',
                label: 'üìñ SCENE SETTING',
                content: `
                    <p>The village elder's final words echo in your mind as you stand before the temple entrance: <em>"No one who enters the crypt returns. But if you don't stop what's down there, the entire region will fall."</em></p>
                    <p>Your party of three stands ready. The stone steps descend into darkness, torch light flickering against damp walls.</p>
                `
            },

            // EVENT 3: Party Dialogue
            {
                type: 'dialogue',
                label: 'üí¨ PARTY DISCUSSION',
                content: `
                    <div class="dialogue-box">
                        <div class="dialogue-speaker">THORNE (Fighter)</div>
                        <div class="dialogue-text">"We've faced worse. Stay together, watch each other's backs. Aria, you take point with your night vision. Kaelen, keep those defensive wards ready."</div>
                    </div>
                    <div class="dialogue-box">
                        <div class="dialogue-speaker">ARIA (Ranger)</div>
                        <div class="dialogue-text">"Something feels wrong about this place. Even the animals won't go near it. My instincts are screaming at me to turn back."</div>
                    </div>
                    <div class="dialogue-box">
                        <div class="dialogue-speaker">KAELEN (Mage)</div>
                        <div class="dialogue-text">"The magical aura is... ancient. Whatever's down there has been sealed for centuries. We need to be careful."</div>
                    </div>
                `
            },

            // EVENT 4: Discovery
            {
                type: 'discovery',
                label: 'üîç IMPORTANT DISCOVERY',
                content: `
                    <p>As you descend the stone steps, the temperature drops dramatically. Frost begins forming on the ancient walls.</p>
                    <div class="discovery-box">
                        <div class="discovery-title">‚ö†Ô∏è KAELEN SPOTS SOMETHING</div>
                        <div class="discovery-content">
                            Glowing runes are carved into the archway ahead. Kaelen's magical training allows him to read them:
                            <br><br>
                            <em style="color: #FF6666;">"Beyond this threshold lies death eternal. The guardian sleeps but never rests. Turn back, or be consumed by shadow."</em>
                        </div>
                    </div>
                    <p>Beyond the archway, skeletal remains litter the floor. Dozens of them. Rusted weapons. Tattered armor. These were adventurers like you.</p>
                `
            },

            // EVENT 5: Warning Moment
            {
                type: 'danger',
                label: '‚ö†Ô∏è CRITICAL MOMENT',
                content: `
                    <div class="warning-box">
                        <div class="warning-title">‚ö†Ô∏è POINT OF NO RETURN</div>
                        <div class="warning-content">
                            You stand at the threshold. Once you cross, there may be no turning back. The skeletal remains are a stark reminder of what happens to those who fail.
                            <br><br>
                            <strong>Before proceeding, you could:</strong>
                            <ul style="margin-top: 10px; margin-left: 20px;">
                                <li>Investigate the remains for clues</li>
                                <li>Proceed immediately while you have surprise</li>
                                <li>Set up defensive preparations first</li>
                            </ul>
                        </div>
                    </div>
                `
            },

            // EVENT 6: Player Choice
            {
                type: 'choice',
                label: '‚öîÔ∏è YOUR DECISION',
                content: {
                    question: 'How do you proceed?',
                    options: [
                        {
                            action: 'Investigate the skeletal remains',
                            consequence: 'Takes 15 minutes. May find valuable clues. Guardian has time to sense you.'
                        },
                        {
                            action: 'Charge forward immediately',
                            consequence: 'Maintains surprise. No preparation. High risk, high reward.'
                        },
                        {
                            action: 'Set defensive wards and traps',
                            consequence: 'Uses spell slots. Safer approach. Takes 20 minutes.'
                        }
                    ]
                }
            },

            // EVENT 7: Outcome (dynamically generated based on choice)
            {
                type: 'outcome',
                label: 'üìä OUTCOME',
                content: null // Will be filled based on player choice
            },

            // EVENT 8: Transition
            {
                type: 'continue',
                content: {
                    prompt: 'Episode 1 Complete',
                    button: 'Continue to Episode 2: The Guardian',
                    action: 'nextEpisode'
                }
            }
        ];

        function updateProgress() {
            const progressText = document.getElementById('progress-text');
            progressText.textContent = `EVENT ${currentEventIndex + 1} of ${totalEvents}`;
        }

        function renderEvent(event) {
            const container = document.getElementById('game-content');

            if (event.type === 'header') {
                container.innerHTML += `
                    <div class="episode-header">
                        <div class="episode-number">${event.content.number}</div>
                        <h1 class="episode-title">${event.content.title}</h1>
                        <div class="episode-location">üìç ${event.content.location}</div>
                    </div>
                `;
            } else if (event.type === 'choice') {
                let optionsHTML = '';
                event.content.options.forEach((option, index) => {
                    optionsHTML += `
                        <div class="choice-option" onclick="makeChoice(${index})">
                            <div class="choice-number">${index + 1}</div>
                            <div class="choice-details">
                                <div class="choice-action">${option.action}</div>
                                <div class="choice-consequence">‚Üí ${option.consequence}</div>
                            </div>
                        </div>
                    `;
                });

                container.innerHTML += `
                    <div class="event-card choice">
                        <div class="event-header">
                            <div class="event-icon">‚öîÔ∏è</div>
                            <div class="event-label">${event.label}</div>
                        </div>
                        <div class="event-content">
                            <div class="choice-panel">
                                <div class="choice-question">${event.content.question}</div>
                                ${optionsHTML}
                            </div>
                        </div>
                    </div>
                `;
            } else if (event.type === 'outcome') {
                // This will be filled when player makes choice
            } else if (event.type === 'continue') {
                container.innerHTML += `
                    <div class="continue-section">
                        <div class="continue-prompt">${event.content.prompt}</div>
                        <button class="continue-btn" onclick="nextEpisode()">
                            ${event.content.button} ‚Üí
                        </button>
                    </div>
                `;
            } else {
                container.innerHTML += `
                    <div class="event-card ${event.type}">
                        <div class="event-header">
                            <div class="event-icon">${event.label.split(' ')[0]}</div>
                            <div class="event-label">${event.label}</div>
                        </div>
                        <div class="event-content">
                            ${event.content}
                        </div>
                    </div>
                `;
            }

            // Scroll to new content
            const cards = container.querySelectorAll('.event-card');
            if (cards.length > 0) {
                cards[cards.length - 1].scrollIntoView({ behavior: 'smooth', block: 'center' });
            }

            updateProgress();
        }

        function makeChoice(choiceIndex) {
            const choiceEvent = events[currentEventIndex];
            const selectedOption = choiceEvent.content.options[choiceIndex];

            // Generate outcome based on choice
            let outcomeHTML = '';
            let statChange = '';

            if (choiceIndex === 0) {
                // Investigate
                outcomeHTML = `
                    <p>You spend 15 minutes carefully examining the skeletal remains...</p>
                    <div class="discovery-box">
                        <div class="discovery-title">üìú CLUE FOUND</div>
                        <div class="discovery-content">
                            Among the bones, Aria discovers a water-damaged journal. The final entry reads:
                            <br><br>
                            <em>"The guardian cannot be killed by steel alone. When its eyes glow red, it channels the crypt's power. Strike then and‚Äî"</em>
                            <br><br>
                            The rest is destroyed, but you've learned something valuable.
                        </div>
                    </div>
                `;
                statChange = `
                    <span class="outcome-stat stat-positive">+3 Party Trust (Smart decision)</span>
                    <span class="outcome-stat">Clue Gained: Guardian's Weakness</span>
                    <span class="outcome-stat stat-negative">Time: +15 minutes</span>
                `;
            } else if (choiceIndex === 1) {
                // Charge forward
                outcomeHTML = `
                    <p>You decide speed is essential. The party charges through the archway!</p>
                    <p>The element of surprise is yours. The guardian hasn't detected you yet. But you're entering completely unprepared...</p>
                `;
                statChange = `
                    <span class="outcome-stat stat-positive">Surprise Maintained</span>
                    <span class="outcome-stat stat-negative">-2 Party Trust (Reckless)</span>
                    <span class="outcome-stat stat-positive">No Time Lost</span>
                `;
            } else {
                // Defensive prep
                outcomeHTML = `
                    <p>Kaelen spends 20 minutes carefully weaving protective wards around the party. Thorne sets up tripwires. Aria scouts escape routes.</p>
                    <p>You're as ready as you'll ever be.</p>
                `;
                statChange = `
                    <span class="outcome-stat stat-positive">+5 Party Trust (Prepared)</span>
                    <span class="outcome-stat stat-negative">-2 Spell Slots Used</span>
                    <span class="outcome-stat stat-negative">Time: +20 minutes</span>
                `;
            }

            const container = document.getElementById('game-content');
            container.innerHTML += `
                <div class="event-card narration">
                    <div class="event-header">
                        <div class="event-icon">üìä</div>
                        <div class="event-label">OUTCOME OF YOUR CHOICE</div>
                    </div>
                    <div class="event-content">
                        ${outcomeHTML}
                        <div class="outcome-banner">
                            <div class="outcome-title">IMMEDIATE EFFECTS</div>
                            <div class="outcome-text">
                                ${statChange}
                            </div>
                        </div>
                    </div>
                </div>
            `;

            currentEventIndex++;
            renderEvent(events[currentEventIndex]); // Show continue button
        }

        function nextEpisode() {
            alert('Demo Complete!\n\nNotice how EVERY SINGLE EVENT was clear:\n\n1. Episode Header - Where you are\n2. Scene Setting - What\'s happening\n3. Party Dialogue - Characters react\n4. Discovery - New information\n5. Warning - Stakes are clear\n6. Your Choice - Options with consequences\n7. Outcome - Results shown clearly\n8. Continue - You control pacing\n\nEach event is its own card with a clear label and purpose.');
            location.reload();
        }

        // Initialize game
        function startGame() {
            currentEventIndex = 0;
            renderEvent(events[0]); // Episode header

            // Auto-reveal subsequent events one by one with delays
            setTimeout(() => {
                currentEventIndex++;
                renderEvent(events[1]); // Narration
            }, 1000);

            setTimeout(() => {
                currentEventIndex++;
                renderEvent(events[2]); // Dialogue
            }, 3000);

            setTimeout(() => {
                currentEventIndex++;
                renderEvent(events[3]); // Discovery
            }, 6000);

            setTimeout(() => {
                currentEventIndex++;
                renderEvent(events[4]); // Warning
            }, 9000);

            setTimeout(() => {
                currentEventIndex++;
                renderEvent(events[5]); // Choice (waits for player)
            }, 12000);
        }

        startGame();

        console.log('Crystal Clear Events Demo');
        console.log('Each event is:');
        console.log('1. In its own card');
        console.log('2. Labeled clearly (üìñ SCENE SETTING, üí¨ DIALOGUE, etc.)');
        console.log('3. Revealed progressively');
        console.log('4. Visually distinct');
        console.log('5. Never ambiguous');
    </script>
</body>
</html>
